<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAG Customer Support Demo</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ü§ñ AI Customer Support Demo</h1>
            <p class="subtitle">Powered by RAG + OpenAI GPT-4 with confidence-based routing</p>
            <div class="status-indicator" id="statusIndicator">
                <span class="status-dot" id="statusDot"></span>
                <span id="statusText">Checking system status...</span>
            </div>
        </header>

        <div class="demo-container">
            <div class="chat-section">
                <div class="chat-header">
                    <h2>üí¨ Ask a Question</h2>
                    <div class="chat-stats" id="chatStats">
                        <span>Response Time: <strong id="responseTime">--</strong></span>
                        <span>Confidence: <strong id="confidenceScore">--</strong></span>
                    </div>
                </div>

                <div class="chat-messages" id="chatMessages">
                    <div class="welcome-message">
                        <div class="message bot-message">
                            <div class="message-avatar">ü§ñ</div>
                            <div class="message-content">
                                <p><strong>Hello!</strong> I'm your AI customer support assistant.</p>
                                <p>Try asking me about:</p>
                                <ul>
                                    <li>üì¶ Shipping and delivery information</li>
                                    <li>üîÑ Returns and exchanges</li>
                                    <li>üì± Product specifications and compatibility</li>
                                    <li>‚ùì Account and ordering questions</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chat-input-container">
                    <div class="input-wrapper">
                        <textarea 
                            id="questionInput" 
                            placeholder="Type your question here... (e.g., 'How do I return a defective iPhone?')"
                            rows="2"
                        ></textarea>
                        <button id="sendButton" onclick="sendQuestion()">
                            <span id="sendButtonText">Send</span>
                            <div id="sendButtonSpinner" class="spinner" style="display: none;"></div>
                        </button>
                    </div>
                    <div class="input-footer">
                        <small>Press Ctrl+Enter to send | Powered by OpenAI GPT-4</small>
                    </div>
                </div>
            </div>

            <div class="info-panel">
                <div class="confidence-panel">
                    <h3>üéØ Confidence Scoring</h3>
                    <div class="confidence-bar-container">
                        <div class="confidence-bar" id="confidenceBar">
                            <div class="confidence-fill" id="confidenceFill"></div>
                        </div>
                        <div class="confidence-labels">
                            <span class="confidence-threshold low">0.6</span>
                            <span class="confidence-threshold high">0.8</span>
                            <span class="confidence-threshold max">1.0</span>
                        </div>
                    </div>
                    <div class="confidence-explanation" id="confidenceExplanation">
                        <p><strong>High (>0.8):</strong> Auto-response ‚úÖ</p>
                        <p><strong>Medium (0.6-0.8):</strong> Needs review üîç</p>
                        <p><strong>Low (<0.6):</strong> Escalate to human üë§</p>
                    </div>
                </div>

                <div class="sources-panel" id="sourcesPanel" style="display: none;">
                    <h3>üìö Information Sources</h3>
                    <div id="sourcesList"></div>
                </div>

                <div class="test-queries-panel">
                    <h3>üß™ Try These Examples</h3>
                    <div class="example-queries">
                        <button class="example-query" onclick="setQuery('How do I return a defective product?')">
                            Return Policy Question
                        </button>
                        <button class="example-query" onclick="setQuery('What shipping options do you offer to international customers?')">
                            Shipping Information
                        </button>
                        <button class="example-query" onclick="setQuery('Is the iPhone 15 Pro compatible with MagSafe chargers?')">
                            Product Compatibility
                        </button>
                        <button class="example-query" onclick="setQuery('What is the meaning of life?')">
                            Out-of-scope Question
                        </button>
                    </div>
                </div>

                <div class="system-info-panel">
                    <h3>‚öôÔ∏è System Information</h3>
                    <div id="systemInfo">
                        <div class="info-item">
                            <span class="info-label">API Status:</span>
                            <span class="info-value" id="apiStatus">Checking...</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Vector Store:</span>
                            <span class="info-value" id="vectorStatus">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Total Documents:</span>
                            <span class="info-value" id="documentCount">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Model:</span>
                            <span class="info-value">GPT-4 + text-embedding-ada-002</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer class="footer">
            <p>RAG + n8n Customer Support Automation System | 
               <a href="dashboard.html">View Analytics Dashboard</a> |
               <a href="https://github.com" target="_blank">GitHub Repository</a>
            </p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>